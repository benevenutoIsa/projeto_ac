
    RS      equ     P1.3   
    EN      equ     P1.2    

org 0000h
	LJMP START

org 0030h
START:
	acall lcd_init
	ACALL bemVindo
	ACALL pedidoEnviado
	ACALL clearDisplay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL confirmando
	ACALL adicionaIngredientes

	JMP $



lcd_init:

	CLR RS		

	CLR P1.7		
	CLR P1.6		
	SETB P1.5		
	CLR P1.4	

	SETB EN		
	CLR EN		

	CALL delay		
					
	SETB EN		
	CLR EN		
				

	SETB P1.7	

	SETB EN		
	CLR EN	
				
	CALL delay		

	CLR P1.7		
	CLR P1.6		
	CLR P1.5		
	CLR P1.4		

	SETB EN		
	CLR EN	

	SETB P1.6		
	SETB P1.5	

	SETB EN		
	CLR EN		

	CALL delay		

	CLR P1.7		
	CLR P1.6		
	CLR P1.5		
	CLR P1.4		

	SETB EN		
	CLR EN		

	SETB P1.7		
	SETB P1.6		
	SETB P1.5		
	SETB P1.4		

	SETB EN		
	CLR EN		

	CALL delay		
	RET


sendCharacter:
	SETB RS  		
	MOV C, ACC.7		
	MOV P1.7, C			
	MOV C, ACC.6		
	MOV P1.6, C			
	MOV C, ACC.5	
	MOV P1.5, C			
	MOV C, ACC.4		
	MOV P1.4, C			

	SETB EN			
	CLR EN			

	MOV C, ACC.3		
	MOV P1.7, C			
	MOV C, ACC.2		
	MOV P1.6, C			
	MOV C, ACC.1		
	MOV P1.5, C	
	MOV C, ACC.0		
	MOV P1.4, C			

	SETB EN			
	CLR EN			

	CALL delay			
	RET


;|--------------------------------------------------------------------------------------|
;|linha 1 | 00 | 01 | 02 | 03 | 04 |05 | 06 | 07 | 08 | 09 |0A | 0B | 0C | 0D | 0E | 0F |
;|linha 2 | 40 | 41 | 42 | 43 | 44 |45 | 46 | 47 | 48 | 49 |4A | 4B | 4C | 4D | 4E | 4F |
;|--------------------------------------------------------------------------------------|
posicionaCursor:
	CLR RS	         
	SETB P1.7		    
	MOV C, ACC.6		
	MOV P1.6, C			
	MOV C, ACC.5		
	MOV P1.5, C			
	MOV C, ACC.4		
	MOV P1.4, C			

	SETB EN			
	CLR EN			

	MOV C, ACC.3		
	MOV P1.7, C			
	MOV C, ACC.2
	MOV P1.6, C			
	MOV C, ACC.1		
	MOV P1.5, C			
	MOV C, ACC.0		
	MOV P1.4, C			

	SETB EN			
	CLR EN			

	CALL delay			
	RET



retornaCursor:
	CLR RS	      
	CLR P1.7		
	CLR P1.6		
	CLR P1.5		
	CLR P1.4	

	SETB EN		
	CLR EN		

	CLR P1.7		
	CLR P1.6		
	SETB P1.5		
	SETB P1.4		

	SETB EN		
	CLR EN		

	CALL delay		
	RET



clearDisplay:
	CLR RS	      
	CLR P1.7		
	CLR P1.6		
	CLR P1.5		
	CLR P1.4		

	SETB EN		
	CLR EN		

	CLR P1.7		
	CLR P1.6		
	CLR P1.5		
	SETB P1.4		

	SETB EN		
	CLR EN		

	CALL delay
	RET


delay:
	MOV R0, #50
	DJNZ R0, $
	RET

bemVindo:
	MOV A, #06h
	ACALL posicionaCursor 
	MOV A, #'B'
	ACALL sendCharacter	
	MOV A, #'E'
	ACALL sendCharacter	
	MOV A, #'M'
	ACALL sendCharacter	
	CLR A
	mov A, #45h
	ACALL posicionaCursor
	MOV A, #'V'
	ACALL sendCharacter
	MOV A, #'I'
	ACALL sendCharacter
	MOV A, #'N'
	ACALL sendCharacter
	MOV A, #'D'
	ACALL sendCharacter
	MOV A, #'O'
	ACALL sendCharacter
	ACALL delay
	RET

pedidoEnviado:
	mov A, #05h
	ACALL posicionaCursor 
	MOV A, #'P'
	ACALL sendCharacter	
	MOV A, #'E'
	ACALL sendCharacter	
	MOV A, #'D'
	ACALL sendCharacter	
	MOV A, #'I'
	ACALL sendCharacter
	MOV A, #'D'
	ACALL sendCharacter
	MOV A, #'O'
	ACALL sendCharacter

	mov A, #45h
	ACALL posicionaCursor 
	MOV A, #'E'
	ACALL sendCharacter
	MOV A, #'N'
	ACALL sendCharacter
 	MOV A, #'V'
	ACALL sendCharacter
	MOV A, #'I'
	ACALL sendCharacter
	MOV A, #'A'
	ACALL sendCharacter
	MOV A, #'D'
	ACALL sendCharacter
	MOV A, #'O'
	ACALL sendCharacter
	RET

confirmando:
	SETB P1.0
	SETB P1.1
	SETB P1.2
	SETB P1.3
	SETB P1.4
	SETB P1.5
	SETB P1.6
	SETB P1.7
	
	CLR A
	MOV A, #00h
	ACALL posicionaCursor 
	MOV A, #'C'
	ACALL sendCharacter	
	MOV A, #'O'
	ACALL sendCharacter	
	MOV A, #'N'
	ACALL sendCharacter	
	MOV A, #'F'
	ACALL sendCharacter
	MOV A, #'I'
	ACALL sendCharacter
	MOV A, #'R'
	ACALL sendCharacter
	MOV A, #'M'
	ACALL sendCharacter
	MOV A, #'A'
	ACALL sendCharacter
	MOV A, #'N'
	ACALL sendCharacter
	MOV A, #'D'
	ACALL sendCharacter
	MOV A, #'O'
	ACALL sendCharacter
	MOV A, #' '
	ACALL sendCharacter
	MOV A, #'.'
	ACALL sendCharacter
	MOV A, #'.'
	ACALL sendCharacter
	MOV A, #'.'

	ACALL delay

	CLR P1.0
	SETB P1.1
	SETB P1.2
	SETB P1.3
	SETB P1.4
	SETB P1.5
	SETB P1.6
	SETB P1.7

	ACALL clearDisplay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay

	CLR A
	MOV A, #00h
	ACALL posicionaCursor 
	MOV A, #'C'
	ACALL sendCharacter
	MOV A, #'O'
	ACALL sendCharacter
	MOV A, #'N'
	ACALL sendCharacter
	MOV A, #'F'
	ACALL sendCharacter
	MOV A, #'I'
	ACALL sendCharacter
	MOV A, #'R'
	ACALL sendCharacter
	MOV A, #'M'
	ACALL sendCharacter
	MOV A, #'A'
	ACALL sendCharacter
	MOV A, #'D'
	ACALL sendCharacter
	MOV A, #'O'
	ACALL sendCharacter

	ACALL delay

	CLR P1.0
	SETB P1.1
	SETB P1.2
	SETB P1.3
	SETB P1.4
	SETB P1.5
	SETB P1.6
	SETB P1.7
	RET

adicionaIngredientes:
	CLR P1.0
	SETB P1.1
	SETB P1.2
	SETB P1.3
	SETB P1.4
	SETB P1.5
	SETB P1.6
	SETB P1.7
	ACALL clearDisplay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay

	MOV A, 00H
	ACALL posicionaCursor
	MOV A, #'I'
	ACALL sendCharacter
	MOV A, #'N'
	ACALL sendCharacter
	MOV A, #'G'
	ACALL sendCharacter
	MOV A, #'R'
	ACALL sendCharacter
	MOV A, #'E'
	ACALL sendCharacter
	MOV A, #'D'
	ACALL sendCharacter
	MOV A, #'I'
	ACALL sendCharacter
	MOV A, #'E'
	ACALL sendCharacter
	MOV A, #'N'
	ACALL sendCharacter
	MOV A, #'T'
	ACALL sendCharacter
	MOV A, #'E'
	ACALL sendCharacter
	MOV A, #'S'
	ACALL sendCharacter

	ACALL clearDisplay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay

	MOV A, 40H
	ACALL posicionaCursor
	MOV A, #'1'
	ACALL sendCharacter
	MOV A, #'.'
	ACALL sendCharacter
	MOV A, #' '
	ACALL sendCharacter
	MOV A, #'O'
	ACALL sendCharacter
	MOV A, #'V'
	ACALL sendCharacter
	MOV A, #'O'
	ACALL sendCharacter

	MOV A, 40H
	ACALL posicionaCursor
	MOV A, #'2'
	ACALL sendCharacter
	MOV A, #'.'
	ACALL sendCharacter
	MOV A, #' '
	ACALL sendCharacter
	MOV A, #'F'
	ACALL sendCharacter
	MOV A, #'E'
	ACALL sendCharacter
	MOV A, #'R'
	ACALL sendCharacter
	MOV A, #'M'
	ACALL sendCharacter
	MOV A, #'E'
	ACALL sendCharacter
	MOV A, #'N'
	ACALL sendCharacter
	MOV A, #'T'
	ACALL sendCharacter
	MOV A, #'O'
	ACALL sendCharacter	

	MOV A, 40H
	ACALL posicionaCursor
	MOV A, #'3'
	ACALL sendCharacter
	MOV A, #'.'
	ACALL sendCharacter
	MOV A, #' '
	ACALL sendCharacter
	MOV A, #'F'
	ACALL sendCharacter
	MOV A, #'A'
	ACALL sendCharacter
	MOV A, #'R'
	ACALL sendCharacter
	MOV A, #'I'
	ACALL sendCharacter
	MOV A, #'N'
	ACALL sendCharacter
	MOV A, #'H'
	ACALL sendCharacter
	MOV A, #'A'
	ACALL sendCharacter
	
	MOV A, 40H
	ACALL posicionaCursor
	MOV A, #'4'
	ACALL sendCharacter
	MOV A, #'.'
	ACALL sendCharacter
	MOV A, #' '
	ACALL sendCharacter
	MOV A, #'A'
	ACALL sendCharacter
	MOV A, #'C'
	ACALL sendCharacter
	MOV A, #'U'
	ACALL sendCharacter
	MOV A, #'C'
	ACALL sendCharacter
	MOV A, #'A'
	ACALL sendCharacter
	MOV A, #'R'
	ACALL sendCharacter

	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay

	ACALL clearDisplay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay
	ACALL delay

	MOV A, 00H
	ACALL posicionaCursor
	MOV A, #'A'
	ACALL sendCharacter
	MOV A, #'D'
	ACALL sendCharacter
	MOV A, #'I'
	ACALL sendCharacter
	MOV A, #'C'
	ACALL sendCharacter
	MOV A, #'I'
	ACALL sendCharacter
	MOV A, #'O'
	ACALL sendCharacter
	MOV A, #'N'
	ACALL sendCharacter
	MOV A, #'A'
	ACALL sendCharacter
	MOV A, #'D'
	ACALL sendCharacter
	MOV A, #'O'
	ACALL sendCharacter

	CLR P1.0
	CLR P1.1
	SETB P1.2
	SETB P1.3
	SETB P1.4
	SETB P1.5
	SETB P1.6
	SETB P1.7
	RET